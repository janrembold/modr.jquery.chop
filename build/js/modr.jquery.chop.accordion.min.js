!function(o){"use strict";function i(o){this.root=o}var t={plugin:"chop",module:"accordion",defaults:{autoClose:!0,duration:300,scroll:!0,scrollDuration:500,onScrollAddTopOffset:function(){return 0}}},e={init:function(){var o=this,i=this.root;i.wrapEvents("init.accordion.chop",function(){i.$element.addClass("chop--accordion"),o.$items=i.$element.find(".chop__item"),o.close(),o.open(i.currentItem-1,0),o.initListeners()})},initListeners:function(){var i=this,t=this.root;t.$element.on("click.item.accordion.chop",".chop__header",function(e){if(e.preventDefault(),!i.isActive){i.isActive=!0;var n=o(this).closest(".chop__item"),c=i.$items.index(n),s=t.options.accordion.duration;i.open(c,s),setTimeout(function(){i.isActive=!1},s)}})},open:function(i,t){var e=this,n=this.root,c=e.$items.eq(i),s=e.predictHeaderTop(i);if("undefined"!=typeof t&&o.isNumeric(t)||(t=n.options.accordion.duration),e.close(i,t),!c.hasClass("chop__item--active")){var r=c.find(".chop__content");n.wrapEvents("open.accordion.chop",function(){c.addClass("chop__item--opening"),r.slideDown(t,function(){c.addClass("chop__item--active").removeClass("chop__item--opening"),o(this).css("display","")}),e.animateScroll(s,n.options.accordion.scrollDuration)},c)}},close:function(i,t){var e=this,n=this.root;"undefined"!=typeof t&&o.isNumeric(t)||(t=n.options.accordion.duration),n.$element.find(".chop__item--active").each(function(){var c=o(this),s=c.find(".chop__content");return n.options.accordion.autoClose||c.get(0)===e.$items.eq(i).get(0)?void n.wrapEvents("close.accordion.chop",function(){c.addClass("chop__item--closing"),s.slideUp(t,function(){c.removeClass("chop__item--active chop__item--closing"),o(this).css("display","")})},c):!0})},predictHeaderTop:function(i){var t=this,e=this.root;if(!e.options.accordion.scroll||!e.options.accordion.autoClose||t.$items.eq(i).hasClass("chop__item--active"))return-1;var n=t.$items.eq(i),c=n.prevAll(".chop__item--active");if(c.length>0){var s=0,r=n.offset().top;return c.each(function(){var i=o(this).find(".chop__content");s+=i.innerHeight()}),r-s+e.options.accordion.onScrollAddTopOffset()}return-1},animateScroll:function(i,t){0>i||o("html, body").animate({scrollTop:i},t)},destroy:function(){var o=this.root;o.$element.removeClass("chop--accordion"),o.$element.off("click.item.accordion.chop"),delete this.isActive,delete this.$items}};o.extend(i.prototype,e),modr.registerPlugin(t,i)}(jQuery);