!function(o){"use strict";function t(o){this.root=o}var e={plugin:"chop",module:"accordion",defaults:{autoClose:!0,duration:400,scroll:!0,onScrollAddTopOffset:function(){return 0}}},i={init:function(){var o=this,t=this.root;t.wrapEvents("init.accordion.chop",function(){t.$element.addClass("chop--accordion"),o.$items=t.$element.find(".chop__item"),o.close(),o.open(t.currentItem-1,0),o.initListeners()})},initListeners:function(){var t=this,e=this.root;e.$element.on("click.item.accordion.chop",".chop__header",function(e){if(e.preventDefault(),!t.isActive){t.isActive=!0;var i=o(this).closest(".chop__item"),n=t.$items.index(i);t.open(n),setTimeout(function(){t.isActive=!1},t.getDuration())}})},open:function(o,t){var e=this,i=this.root,n=e.$items.eq(o),c=e.predictHeaderTop(o);if(t=e.getDuration(t),e.close(o,t),!n.hasClass("chop__item--active")){var s=n.find(".chop__content");i.wrapEvents("open.accordion.chop",function(){n.addClass("chop__item--opening"),s.slideDown(t,function(){n.addClass("chop__item--active").removeClass("chop__item--opening")}),e.animateScroll(c,t)},n)}},close:function(t,e){var i=this,n=this.root;e=i.getDuration(e),n.$element.find(".chop__item--active").each(function(){var c=o(this),s=c.find(".chop__content");return n.options.accordion.autoClose||c.get(0)===i.$items.eq(t).get(0)?void n.wrapEvents("close.accordion.chop",function(){c.addClass("chop__item--closing"),s.slideUp(e,function(){c.removeClass("chop__item--active chop__item--closing")})},c):!0})},predictHeaderTop:function(t){var e=this,i=this.root;if(!i.options.accordion.scroll||!i.options.accordion.autoClose||e.$items.eq(t).hasClass("chop__item--active"))return-1;var n=e.$items.eq(t),c=n.prevAll(".chop__item--active");if(c.length>0){var s=0,r=n.offset().top;return c.each(function(){var t=o(this).find(".chop__content");s+=t.innerHeight()}),r-s+i.options.accordion.onScrollAddTopOffset()}return-1},animateScroll:function(t,e){0>t||o("html, body").animate({scrollTop:t},e)},getDuration:function(t){var i=this.root;return"undefined"==typeof t||!o.isNumeric(t)||0>t?i.options[e.module].duration:t},destroy:function(){root.$element.removeClass("chop--accordion"),root.$element.off("click.item.accordion.chop"),delete this.isActive,delete this.$items}};o.extend(t.prototype,i),modr.registerPlugin(e,t)}(jQuery);