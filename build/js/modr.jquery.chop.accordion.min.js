!function(o){"use strict";function t(o){this.root=o}var e={plugin:"chop",module:"accordion",defaults:{autoClose:!0,duration:300,scroll:!0,scrollDuration:500,onScrollAddTopOffset:function(){return 0}}},i={init:function(){var o=this,t=this.root;t.wrapEvents("init.accordion.chop",function(){t.$element.addClass("chop--accordion"),o.$items=t.$element.find(".chop__item"),o.close(),o.open(t.currentItem,0),t.$element.removeClass("chop--loading"),o.initListeners()})},initListeners:function(){var t=this,e=this.root;e.$element.on("click.item.accordion.chop",".chop__header",function(i){if(i.preventDefault(),!t.isActive){t.isActive=!0;var n=o(this).closest(".chop__item"),c=t.$items.index(n),s=e.options.accordion.duration;t.open(c,s),setTimeout(function(){t.isActive=!1},s)}})},open:function(t,e){var i=this,n=this.root,c=i.$items.eq(t),s=i.predictHeaderTop(t);if("undefined"!=typeof e&&o.isNumeric(e)||(e=n.options.accordion.duration),i.close(t,e),!c.hasClass("chop__item--active")){var r=c.find(".chop__content");n.wrapEvents("open.accordion.chop",function(){c.addClass("chop__item--opening"),r.slideDown(e,function(){c.addClass("chop__item--active").removeClass("chop__item--opening"),o(this).css("display","")}),i.animateScroll(s,n.options.accordion.scrollDuration)},c),n.currentItem=t}},close:function(t,e){var i=this,n=this.root;"undefined"!=typeof e&&o.isNumeric(e)||(e=n.options.accordion.duration),n.$element.find(".chop__item--active").each(function(){var c=o(this),s=c.find(".chop__content");return n.options.accordion.autoClose||c.get(0)===i.$items.eq(t).get(0)?void n.wrapEvents("close.accordion.chop",function(){c.addClass("chop__item--closing"),s.slideUp(e,function(){c.removeClass("chop__item--active chop__item--closing"),o(this).css("display","")})},c):!0})},predictHeaderTop:function(t){var e=this,i=this.root;if(!i.options.accordion.scroll||!i.options.accordion.autoClose||e.$items.eq(t).hasClass("chop__item--active"))return-1;var n=e.$items.eq(t),c=n.prevAll(".chop__item--active");if(c.length>0){var s=0,r=n.offset().top;return c.each(function(){var t=o(this).find(".chop__content");s+=t.innerHeight()}),r-s+i.options.accordion.onScrollAddTopOffset()}return-1},animateScroll:function(t,e){0>t||o("html, body").animate({scrollTop:t},e)},destroy:function(){var o=this.root;o.$element.addClass("chop--loading"),o.$element.removeClass("chop--accordion"),this.$items.removeClass("chop__item--active"),o.$element.off("click.item.accordion.chop"),delete this.isActive,delete this.$items}};o.extend(t.prototype,i),modr.registerPlugin(e,t)}(jQuery);