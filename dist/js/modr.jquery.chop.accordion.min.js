/*! modr.jquery.chop | @version v0.1.0 | @license MIT */
!function(e){"use strict";function o(e,o){var t=this;t.root=e,t.options=o}var t={plugin:"chop",module:"accordion",defaults:{autoClose:!0,duration:300,scroll:!0,scrollDuration:500,onScrollAddTopOffset:function(){return 0}},dependencies:{helper:["events"]}},i={init:function(o){var t=this,i=t.root;i.wrapEvents("init.accordion.chop",function(){i.$element.addClass("chop--accordion"),t.$items=i.$element.find(".chop__item");var n={};if(i.$element.trigger("open.items.chop",[n]),"undefined"!=typeof n.openItems&&(o=n.openItems),"undefined"!=typeof o){e.isArray(o)||(o=[o]),t.options.autoClose&&t.close();for(var s=0,c=o.length;c>s;++s)t.open(o[s],0)}t.initListeners()}),i.$element.removeClass("chop--loading")},initListeners:function(){var o=this,t=o.root;t.$element.on("click.item.accordion.chop",".chop__header",function(t){if(t.preventDefault(),!o.isActive){o.isActive=!0;var i=e(this).closest(".chop__item"),n=o.$items.index(i),s=o.options.duration;o.open(n,s),setTimeout(function(){o.isActive=!1},s)}})},open:function(o,t){var i=this,n=i.root,s=i.$items.eq(o),c=i.predictHeaderTop(o);if("undefined"!=typeof t&&e.isNumeric(t)||(t=i.options.duration),i.close(o,t),!s.hasClass("chop__item--active")){var r=s.find(".chop__content");n.wrapEvents("open.item.chop",function(){s.addClass("chop__item--opening"),r.slideDown(t,function(){s.addClass("chop__item--active").removeClass("chop__item--opening"),e(this).css("display","")}),i.animateScroll(c,i.options.scrollDuration)},s),n.currentItem=o}},close:function(o,t){var i=this,n=i.root;"undefined"!=typeof t&&e.isNumeric(t)||(t=i.options.duration),n.$element.find(".chop__item--active").each(function(){var s=e(this),c=s.find(".chop__content");return i.options.autoClose||s.get(0)===i.$items.eq(o).get(0)?void n.wrapEvents("close.item.chop",function(){s.addClass("chop__item--closing"),c.slideUp(t,function(){s.removeClass("chop__item--active chop__item--closing"),e(this).css("display","")})},s):!0})},predictHeaderTop:function(o){var t=this;if(!t.options.scroll||!t.options.autoClose||t.$items.eq(o).hasClass("chop__item--active"))return-1;var i=t.$items.eq(o),n=i.prevAll(".chop__item--active");if(n.length>0){var s=0,c=i.offset().top;return n.each(function(){var o=e(this).find(".chop__content");s+=o.innerHeight()}),c-s+t.options.onScrollAddTopOffset()}return-1},animateScroll:function(o,t){var i=this;i.options.scroll&&(0>o&&(o=0),e("html, body").animate({scrollTop:o},t))},destroy:function(){var e=this,o=e.root;o.$element.addClass("chop--loading"),o.$element.removeClass("chop--accordion"),e.$items.removeClass("chop__item--active"),o.$element.off("click.item.accordion.chop"),delete e.isActive,delete e.$items}};e.extend(o.prototype,i),modr.registerModule(t,o)}(jQuery);