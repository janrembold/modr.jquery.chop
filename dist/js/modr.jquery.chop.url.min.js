!function(e){"use strict";function t(e){this.root=e;var t=this,i=this.root,n=i.$element.data("param");i.options.url.active&&n&&""!==n&&t.historyAvailable()&&(t.param=n,t.init())}var i={plugin:"chop",module:"url",defaults:{active:!0,urlencode:!1,onDeparam:null}},n={init:function(){var t=this,n=this.root;t.$items=n.$element.find(".chop__item"),n.$element.one("before.set.start.chop",function(i){var o=t.deparam();"undefined"!=typeof o[t.param]&&e.isNumeric(o[t.param])&&(i.preventDefault(),n.currentItem=o[t.param]-1)}),n.$element.one("ready."+i.plugin,function(){t.initListeners()})},initListeners:function(){var e=this;e.$items.on("after.open.accordion.chop",function(){clearInterval(e.timeout),e.set(e.$items.index(this)+1)}),e.$items.on("after.close.accordion.chop",function(){clearInterval(e.timeout),e.timeout=setTimeout(function(){e.remove()},250)}),e.$items.on("after.open.tab.chop",function(){e.set(e.$items.index(this)+1)})},set:function(e){var t=this,i=t.deparam();("undefined"==typeof i[t.param]||i[t.param]!==e)&&(i[t.param]=e+1,t.replace(i))},remove:function(){var e=this,t=e.deparam();"undefined"!=typeof t[e.param]&&(delete t[e.param],e.replace(t))},replace:function(t){var i=this.root,n=e.param(t);i.options.core.urlencode&&(n=urlencode(n)),history.replaceState(null,"","?"+n+window.location.hash)},deparam:function(){var t=this.root;if(e.isFunction(t.options.url.onDeparam))return t.options.url.onDeparam();for(var i=window.location.search.substring(1),n=i.split("&"),o={},r=0,a=n.length;a>r;++r)if(n[r]&&""!==n[r]){var s=n[r].split("=");"undefined"==typeof o[s[0]]?o[s[0]]=s[1]:(e.isArray(o[s[0]])||(o[s[0]]=[o[s[0]]]),o[s[0]].push(s[1]))}return o},historyAvailable:function(){var e=navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1},destroy:function(){clearInterval(self.timeout),delete this.param,delete this.$items,delete this.timeout}};e.extend(t.prototype,n),modr.registerPlugin(i,t)}(jQuery);